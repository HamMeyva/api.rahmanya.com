# --- ðŸ“Œ Start::Response Models ---
type AgoraChannelInvite {
    id: ID
    agora_channel_id: ID!
    agora_channel_data: AgoraChannel @field(resolver: "App\\GraphQL\\Resolvers\\Agora\\AgoraInviteResolver@resolveInviteChannelData")
    user_id: ID!
    user: User @field(resolver: "App\\GraphQL\\Resolvers\\Agora\\AgoraInviteResolver@resolveInviteUser")
    invited_user_id: ID!
    invited_user: User @field(resolver: "App\\GraphQL\\Resolvers\\Agora\\AgoraInviteResolver@resolveInviteInvitedUser")
    status_id: Int!
    get_status: String!
    invited_at: DateTime
    responded_at: DateTime
    created_at: DateTime!
    updated_at: DateTime!
}


type InviteGuestToStreamResponse {
    success: Boolean!
    message: String,
}

type RespondToStreamInviteResponse {
    success: Boolean!
    message: String
    token: String
    agora_channel: AgoraChannel
    shared_video_room_id: String
    parent_channel_id: String
}

type GetMyStreamInvitesResponse {
    success: Boolean!
    data: [AgoraChannelInvite]
}

type InvitableUser {
    id: ID!
    type: String!
    user_data: JSON!
    watch_duration: Int
    joined_at: DateTime
}

type GetInvitableUsersResponse {
    success: Boolean!
    message: String
    users: [InvitableUser!]!
    total: Int!
}
# --- ðŸ“Œ End::Response Models ---

# --- ðŸ“Œ Start::Input Models ---
input InviteGuestToStreamInput {
    agora_channel_id: ID!
    invited_user_id: ID!
}

input RespondToStreamInviteInput {
    invite_id: ID!
    response: Boolean!
    create_separate_stream: Boolean
}

input getMyStreamInvitesInput {
    page: Int
    limit: Int
    agora_channel_id: ID
    status_id: ID
}
# --- ðŸ“Œ End::Input Models ---

# --- ðŸ“Œ Start::Query ---
extend type Query {
    getMyStreamInvites(input: getMyStreamInvitesInput!): GetMyStreamInvitesResponse!
        @guard(with: ["sanctum"])
        @field(resolver: "App\\GraphQL\\Resolvers\\Agora\\AgoraInviteResolver@getMyStreamInvites")
    
    # Davet edilebilir kullanÄ±cÄ±larÄ± listele
    getInvitableUsers(agora_channel_id: ID!): GetInvitableUsersResponse!
        @guard(with: ["sanctum"])
        @field(resolver: "App\\GraphQL\\Resolvers\\Agora\\AgoraInviteResolver@getInvitableUsers")
}
# --- ðŸ“Œ End::Query ---

# --- ðŸ“Œ Start::Mutations ---
extend type Mutation {
    # YayÄ±na konuk davet et
    inviteGuestToStream(input: InviteGuestToStreamInput!): InviteGuestToStreamResponse!
        @guard(with: ["sanctum"])
        @field(resolver: "App\\GraphQL\\Resolvers\\Agora\\AgoraInviteResolver@inviteGuestToStream")

    # Daveti cevapla
    respondToStreamInvite(input: RespondToStreamInviteInput!): RespondToStreamInviteResponse!
        @guard(with: ["sanctum"])
        @field(resolver: "App\\GraphQL\\Resolvers\\Agora\\AgoraInviteResolver@respondToInvite")
}
# --- ðŸ“Œ End::Mutations ---
# --- ðŸ“Œ Start::Additional Queries for Frontend Compatibility ---
extend type Query {
    # Frontend compatibility alias for streamInvitations
    streamInvitations(input: getMyStreamInvitesInput!): GetMyStreamInvitesResponse!
        @guard(with: ["sanctum"])
        @field(resolver: "App\\GraphQL\\Resolvers\\Agora\\AgoraInviteResolver@streamInvitations")
}
# --- ðŸ“Œ End::Additional Queries ---

# --- ðŸ“Œ Start::Additional Mutations for Frontend Compatibility ---
extend type Mutation {
    # Frontend compatibility alias for sendStreamInvitation  
    sendStreamInvitation(input: InviteGuestToStreamInput!): InviteGuestToStreamResponse!
        @guard(with: ["sanctum"])
        @field(resolver: "App\\GraphQL\\Resolvers\\Agora\\AgoraInviteResolver@sendStreamInvitation")
}
# --- ðŸ“Œ End::Additional Mutations ---
